<h2>ユーザ情報</h2>
<p><%= @user.name %></p>
<p><%= @user.email%></p>
<% if @user.image.attached? %>
    <p><%= image_tag @user.image, size:"50x50" %></p>
<% end %>
<%= link_to "プロフ編集画面", edit_user_path(@user) %>

<p><%= link_to "投稿する", new_post_path %> </p>

<h2>投稿の一覧</h2>
<% @posts.each do |post| %>

    <%= link_to post_path(post.id) do %>
        <%= post.title %>
    <% end %>
        [<%= post.language.lang_name %>]
<br>

<% end %>

<%= link_to "タイマー測定開始",user_timers_path(current_user.id),method: :post %>

<div id="clock">00:00:00</div>
<form>
    <input type="button" id="start" value="Start">
    <input type="button" id="stop" value="Stop" disabled>
    <input type="button" id="restart" value="Restart" disabled>
</form>

<script>
$(function () {
  var sec = 0;
  var min = 0;
  var hour = 0;

  var timer;

  // スタート
  $('#start').click(function() {
    // 00:00:00から開始
    sec = 0;
    min = 0;
    hour = 0;
    $('#clock').html('00:00:00');
    timer = setInterval(countup, 1000);

    $(this).prop('disabled', true);
    $('#stop,#reset').prop('disabled', false);
  });

  // ストップ
  $('#stop').click(function() {
    // 一時停止
    clearInterval(timer);

    $(this).prop('disabled', true);
    $('#restart').prop('disabled', false);
    //ストップした時の時間をconsoleに出力
        console.log($("#clock").text());

        var a = $("#clock").text();

        const b = a.slice(0, 2);
        const c = a.slice(3, 5);
        const d = a.slice(6, 8);

        console.log(b);
        console.log(c);
        console.log(d);

  });

  // リスタート
  $('#restart').click(function() {
    // 一時停止から再開
    timer = setInterval(countup, 1000);

    $(this).prop('disabled', true);
    $('#stop').prop('disabled', false);
  });

  // リセット
  $('#reset').click(function() {
    // 初期状態
    sec = 0;
    min = 0;
    hour = 0;
    $('#clock').html('00:00:00');
    clearInterval(timer);

    $('#stop,#restart,#reset').prop('disabled', true);
    $('#start').prop('disabled', false);
  });

 /**
  * カウントアップ
  */
  function countup()
  {
    sec += 1;

    if (sec > 59) {
      sec = 0;
      min += 1;
    }

    if (min > 59) {
      min = 0;
      hour += 1;
    }

    // 0埋め
    sec_number = ('0' + sec).slice(-2);
    min_number = ('0' + min).slice(-2);
    hour_number = ('0' + hour).slice(-2);

    $('#clock').html(hour_number + ':' +  min_number + ':' + sec_number);
  }
});


</script>